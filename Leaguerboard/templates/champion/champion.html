{% extends 'bootstrap/base.html' %}

{% block style %}
    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
    }
    th, td {
        padding: 15px;
        text-align: center;
    }

    .map_info {
        position: relative;
        height: 240px;
        width: 240px;
        text-align: center;
        background-image: url({{ url_for('static', filename='img/map/map11.png') }});
        background-repeat: no-repeat;
        background-size: contain;
        color: #FFFFFF;
        margin-right: 30%;
        margin-left: 4%;
    }

    .TOP {
        position: absolute;
        top: 24px;
        left: 22px;
    }

    .MIDDLE {
        position: absolute;
        top: 45%;
        width: 100%;
    }

    .JUNGLE {
        position: absolute;
        top: 25%;
        width: 55%;
    }

    .sup {
        position: absolute;
    }

    .BOTTOM {
        position: absolute;
        bottom: 24px;
        right: 22px;
    }

    .lore {
        width: 50%;
    }


{% endblock %}

{% block title %}{{ champ['name'] }}{% endblock %}

{% block content %}
    <div class="lore">
        <h1>{{ champ['name'] }}</h1>
        <p>{{ role_count }}</p>
        <p>{{ lane_count }}</p>
        <img src="{{ url_for('static', filename='img/champion/'+champ['image']['full']) }}"/>
        <h3>{{ champ['title'] }} </h3>
        <p> {{ champ['lore'] }} </p>
    </div>
    <div class="map_info">
        <!--<img src="{{ url_for('static', filename='img/map/map11.png') }}" style="max-width=50%"/>-->
        {% for lane in lane_count.keys() %}
            <div class={{ lane }}>{{ "%.0f%%" % (100.0*lane_count[lane]/lane_count.values()|sum()) }}</div>
        {% endfor %}
    </div>

    <p> Total games played: {{ game_count }} </p>
    <p> Total games won:{{ win_count }} </p>

    <table>
        <tr>
            <th> Summoner </th>
            <th> Lifetime K/D/A </th>
            <th> Games Played </th>
            <th> Games Won </th>
            <th> Win % </th>
        </tr>
        {% for stat_line in player_stats %}
        <tr>
            <td ><a href="{{ url_for('summoner.summoner_stats', summoner=stat_line[0]) }}">{{ stat_line[0] }}</a></td>
            <td>{{ stat_line[1]['kills'] }}/{{ stat_line[1]['deaths'] }}/{{ stat_line[1]['assists'] }}
            <td>{{ stat_line[1]['game_count'] }}</td>
            <td>{{ stat_line[1]['win_count'] }}</td>
            {% if stat_line[1]['game_count'] == 0 %}
            <td>-</td>
            {% else %}
            <td>{{"%.2f%%" % (100.0 * stat_line[1]['win_count']/stat_line[1]['game_count']) }}</td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
    <br>
    <script>
        $(document).ready(function() {
            $('#history').DataTable();
            $('.dataTables_length').addClass('bs-select');
        } );
    </script>
    <table class="table table-hover">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Result</th>
                <th scope="col">Summoner</th>
                <th scope="col">K/D/A</th>
                <th scope="col">Role</th>
                <th scope="col">Lane</th>
                <th scope="col">Queue</th>
                <th scope="col">Date</th>
            </tr>
        </thead>
        <tbody>
        {% for match in match_history %}
            <tr>
                <th scope="row">{{ match.MatchStat.win }}</th>
                <td>{{ match.name }}</td>
                <td>{{ match.MatchStat.kills }}/{{ match.MatchStat.deaths }}/{{ match.MatchStat.assists }} </td>
                <td>{{ match.MatchStat.role }}</td>
                <td>{{ match.MatchStat.lane }}</td>
                <td>{{ match.queue }}</td>
                <td><script>
                        var milisecs = {{ match.timestamp }} 
                        var local_time = new Date(milisecs)
                        document.write(local_time.toLocaleString())
                    </script>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>


    {% endblock %}
